<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <title>Task Launcher</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; margin: 24px; }
    .row { margin: 8px 0; display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
    button { padding: 6px 10px; }
    input[type="number"] { width: 80px; }
    pre { background: #0104c97c; padding: 10px; border-radius: 6px; }
    #script { width: 300px; } /* domyślna szerokość */
  </style>
</head>
<body>
  <h2>Task Launcher (HTML/JS)</h2>

  <!-- Ustawienia wyglądu -->
  <h3>Ustawienia wyglądu</h3>
  <div class="row">
    <label>Kolor tła:</label>
    <input type="color" id="bgColor" value="#ffffff" />
    <label>Kolor czcionki:</label>
    <input type="color" id="fontColor" value="#000000" />
    <label>Szerokość pola Script:</label>
    <input type="range" id="scriptWidth" min="150" max="600" value="300" />
  </div>

  <!-- Parametry -->
  <h3>Parametry</h3>
  <div class="row">
    <label>Script:</label>
    <input id="script" type="text" value="New_Item_ExerciseOrTest.ps1" />
  </div>

  <div class="row">
    <label>Chapter:</label>
    <button onclick="dec('chapter')">−</button>
    <input id="chapter" type="number" value="4" min="0" />
    <button onclick="inc('chapter')">+</button>
  </div>

  <div class="row">
    <label>Name a_b_c_d:</label>
    <span>a</span><button onclick="dec('a')">−</button><input id="a" type="number" value="4" min="0" /><button onclick="inc('a')">+</button>
    <span>b</span><button onclick="dec('b')">−</button><input id="b" type="number" value="4" min="0" /><button onclick="inc('b')">+</button>
    <span>c</span><button onclick="dec('c')">−</button><input id="c" type="number" value="9" min="0" /><button onclick="inc('c')">+</button>
     <span>d</span><button onclick="dec('d')">−</button><input id="d" type="number" value="0" min="0" /><button onclick="inc('d')">+</button>
   <!-- <span>e</span><button onclick="dec('e')">−</button><input id="e" type="number" value="0" min="0" /><button onclick="inc('e')">+</button> -->
   <!-- <span>f</span><button onclick="dec('f')">−</button><input id="f" type="number" value="0" min="0" /><button onclick="inc('f')">+</button> -->
  </div>

  <h3>Aktualna komenda</h3>
  <pre id="cmd"></pre>

  <div class="row">
    <button onclick="copyCmd()">Kopiuj</button>
    <button onclick="downloadPs1()">Pobierz .ps1</button>
  </div>

  <script>
    const pad2 = n => String(parseInt(n||0,10)).padStart(2, '0');
    const el = id => document.getElementById(id);

    function buildCmd() {
      const s = el('script').value.trim();
      const ch = pad2(el('chapter').value);
      const a = el('a').value, b = el('b').value, c = el('c').value;
      const d = el('d').value, e = el('e').value, f = el('f').value;
      return `${s} -Chapter ${ch} -Name ${a}_${b}_${c}_${d}`;
    }

    function render(){ el('cmd').textContent = buildCmd(); }

    ['script','chapter','a','b','c','d'].forEach(id => el(id).addEventListener('input', render));

    function inc(id){ el(id).value = Number(el(id).value||0)+1; render(); }
    function dec(id){ el(id).value = Math.max(0, Number(el(id).value||0)-1); render(); }

    async function copyCmd(){
      await navigator.clipboard.writeText(buildCmd());
      alert('Skopiowano');
    }

    function downloadPs1(){
      const cmd = buildCmd();
      const content = `# Generated by HTML launcher\r\n${cmd}\r\n`;
      const blob = new Blob([content], {type: 'text/plain'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'run_task.ps1';
      a.click();
      URL.revokeObjectURL(a.href);
    }

    // Obsługa ustawień wyglądu
    el('bgColor').addEventListener('input', e => document.body.style.backgroundColor = e.target.value);
    el('fontColor').addEventListener('input', e => document.body.style.color = e.target.value);
    el('scriptWidth').addEventListener('input', e => el('script').style.width = e.target.value + 'px');

    render();
  </script>
</body>
</html>
